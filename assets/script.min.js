"use stricts";
(function(){var a={b:function(){var h=document,k=h.body,m=window.applicationCache;if(m)if(k){this.info=h.getElementById("appcache_info");if(!this.info){h.a=h.createElement;var j=h.a("a"),h=h.a("div");h.id="appcache_info";j.href="";j.addEventListener("click",function(a){a.stopPropagation();window.location.reload()},!0);h.appendChild(j);k.firstChild&&k.insertBefore(h,k.firstChild);this.info=h}"checking,downloading,progress,noupdate,cached,updateready,obsolete,error".split(",").forEach(function(h){m.addEventListener(h,a)})}else console.log("Premature init. Put the <script> in <body>.")},
handleEvent:function(a){this.info.className=this.info.className.replace(/ ?appcache\-.+\b/g,"")+" appcache-"+a.type;"downloading"===a.type&&(this.count=0);"progress"===a.type&&(this.count++,this.info.setAttribute("data-progress",a.total?a.loaded+1+"/"+a.total:this.count))}};a.b()})();
jQuery(function(a){function h(){return!a("#title:visible").length}function k(){var e=[];a("#mobileSponsorLogo").remove();a.each({diamond:10,gold:5,silver:2,bronze:1},function(d,b){a("#sidebar > .sponsors ."+d+" a").each(function(){for(var a=b;a--;)e.push(this)})});0!==e.length&&a("#nav").after(a('<p id="mobileSponsorLogo" />').append(a(e[Math.floor(e.length*Math.random())]).clone()))}function m(){if(a("table.program").length)if(n){a(window).delegate("#video_modal, #video_close_button","click",function(){a(".video_box").remove();
a(window).unbind("scroll.repositionvideo resize.repositionvideo pageload.repositionvideo")});a(window).delegate(".shortcuts a","click",function(f){a(window).trigger("scroll");f.preventDefault();a(document.body).animate({scrollTop:a(this.hash).offset().top-20},180)});a(window).one("pageunload",function(){a(window).undelegate("#video_modal, #video_close_button","click");a(window).undelegate(".shortcuts a","click")});var e=function(){var f={};a(".types li").each(function(c){f[(c+1).toString(10)]=a(this).text()});
return f}();a.fn.translateTo=function(a){return a?(a+=10,this.addClass("translate").css({"-webkit-transform":"translateX("+a.toString(10)+"px)","-moz-transform":"translateX("+a.toString(10)+"px)","-ms-transform":"translateX("+a.toString(10)+"px)",transform:"translateX("+a.toString(10)+"px)"})):this.removeClass("translate").css({"-webkit-transform":"","-moz-transform":"","-ms-transform":"",transform:""})};var d;a("table.program").each(function(){var f=a(this);f.prev().after(a('<div class="program" />').append(f).bind("scroll",
function(){var c=a(this);c.find("thead th:first, tbody th").translateTo(0);clearTimeout(d);d=setTimeout(function(){c.find("thead th:first, tbody th").translateTo(c.scrollLeft())},200)}).bind("touchstart",function(c){var f=a(this),g=a(window),e=c.clientX||c.originalEvent.touches[0].clientX,b=c.clientY||c.originalEvent.touches[0].clientY;f.hasClass("expend")&&!h()&&(f.addClass("movestart"),g.bind("touchmove",function(a){f.removeClass("movestart").addClass("moving").scrollLeft(f.scrollLeft()+e-(a.clientX||
a.originalEvent.touches[0].clientX));"touchmove"!==a.type&&g.scrollTop(g.scrollTop()+b-(a.clientY||a.originalEvent.touches[0].clientY));e=a.clientX||a.originalEvent.touches[0].clientX;b=a.clientY||a.originalEvent.touches[0].clientY}).bind("touchend",function(){g.unbind("touchmove touchend");setTimeout(function(){f.removeClass("moving movestart")},0);return!1}))}))});a("table.program td").each(function(){var f=a(this),c=n[f.data("pid")];if(c)if(0===c.type){var b=a('<ul class="meta" />');if(c.slide){var g=
a('<li><a href="'+c.slide+'">'+{en:"Slide","zh-tw":"\u6295\u5f71\u7247","zh-cn":"\u6295\u5f71\u7247"}[j||"en"]+"</a></li>");b.append(g)}if(c.youtube){var g=[].concat(c.youtube),d="http://www.youtube.com/embed/"+g.shift()+"?hd=1";c.youtube.length&&(d+="&playlist="+g.join(","));g=a('<li><a href="'+d+'" class="youtube_video">'+{en:"Video","zh-tw":"\u6f14\u8b1b\u9304\u5f71","zh-cn":"\u6f14\u8bb2\u5f55\u5f71"}[j||"en"]+"</a></li>");b.append(g)}b.children().length&&f.append(b)}else{var i=a('<ul class="meta" />'),
b=a('<ul class="meta" />'),g={en:"English",zh:"\u6f22\u8a9e"}[(this.className.match(/program_lang_(\w+)\b/)||[])[1]],d=e[(this.className.match(/program_type_(\w+)\b/)||[])[1]];g&&i.append(a("<li />").text(g));d&&i.append(a("<li />").text(d));c.slide&&(g=a('<li><a href="'+c.slide+'">'+{en:"Slide","zh-tw":"\u6295\u5f71\u7247","zh-cn":"\u6295\u5f71\u7247"}[j||"en"]+"</a></li>"),b.append(g),i.append(g.clone()));c.youtube&&(g=[].concat(c.youtube),d="http://www.youtube.com/embed/"+g.shift()+"?hd=1",c.youtube.length&&
(d+="&playlist="+g.join(",")),g=a('<li><a href="'+d+'" class="youtube_video">'+{en:"Video","zh-tw":"\u6f14\u8b1b\u9304\u5f71","zh-cn":"\u6f14\u8bb2\u5f55\u5f71"}[j||"en"]+"</a></li>"),b.append(g),i.append(g.clone()));g=a('<div class="info" />');i.children().length&&g.append(i);c["abstract"]&&g.append(a('<div class="abstract" />').html(c["abstract"]));c.bio&&g.append(a('<div class="bio" />').html(c.bio));b.children().length&&f.append(b);g.children().length&&f.append(g)}}).bind("click",function(){var f=
a(this),c=f.parents("div.program"),b=parseInt((this.className.match(/program_room_(\w+)\b/)||[])[1]),d=a(window).scrollTop()-f.offset().top;if(c.hasClass("moving"))return!1;window._gaq&&_gaq.push(["_trackEvent","Program 2012",this.hash]);a(this).toggleClass("expend");c.toggleClass("expend");c.find("thead th:first, tbody th").translateTo(c.scrollLeft());switch(b){case 0:c.scrollLeft(0.26*c[0].scrollWidth);break;case 1:c.scrollLeft(0);break;case 2:c.scrollLeft(0.13*c[0].scrollWidth);break;case 3:c.scrollLeft(0.38*
c[0].scrollWidth);break;case 4:c.scrollLeft(c[0].scrollWidth)}a(window).scrollTop(f.offset().top+d)});a(".program p.name a").bind("click",function(a){if(2==a.which||a.metaKey)return!0;a.preventDefault()});a(".program .meta a, .program .info a").bind("click",function(b){if(2==b.which||b.metaKey)return!0;if(a(this).hasClass("youtube_video")&&!h()){if(a(document.body).append('<div id="video_modal" class="video_box" />').append('<iframe id="video_iframe" class="video_box" title="YouTube video player" width="854" height="483"  src="'+
this.href+'" frameborder="0"  allowfullscreen="allowfullscreen"></iframe>').append('<div id="video_close_button" class="video_box" />'),0===a("#video_modal").offset().top){a(".video_box").css("position","absolute");var c=function(){a("#video_modal").css({top:0,left:0,width:document.body.scrollWidth,height:document.body.scrollHeight});a("#video_iframe, #video_close_button").css({top:a(window).scrollTop()+(window.innerHeight||a(window).height())/2,left:a(window).scrollLeft()+(window.innerWidth||a(window).width())/
2})};c();a(window).bind("scroll.repositionvideo resize.repositionvideo",c).bind("pageload.repositionvideo",function(c){a(window).unbind("scroll.repositionvideo resize.repositionvideo").unbind(c)})}}else window.open(this.href);b.preventDefault();b.stopPropagation()})}else{var b=window.location.href.match(/^http:\/\/coscup.org\/[^\/]+\//)[0]+"api/program/";a.getJSON(b,function(a){n=a.program;m()})}}var j=(a("html").attr("lang")||"zh-TW").toLowerCase(),l={init:function(){this._loadPage();if(window.history.pushState){var e=
"state"in window.history,d=location.href;a("a").live("click",function(b){if(2==b.which||b.metaKey||this.hostname!==window.location.hostname||!/2012/.test(this.pathname)||!RegExp(j).test(this.pathname.toLowerCase())||"#"===this.getAttribute("href").substr(0,1)||/nocache/.test(this.getAttribute("rel")))return!0;a(this).parent("#nav li").addClass("loading");var b=this.href,d=this.href===window.location.href;history.pushState({is:"pushed"},"",b);l._getPage(b,d,!0);e=!0;return!1});window.onpopstate=function(){var a=
!e&&location.href==d;e=!0;a||l._getPage(window.location.href,!1,!1)}}},_getPage:function(e,d,b){a(window).unbind("resize.defer");a(window).trigger("pageunload");this._xhr&&this._xhr.abort();var f=a("#content").addClass("loading");this._xhr=a.ajax({url:e,dataType:"html",complete:function(c,d){if("success"!==d&&"notmodified"!==d)window.location.replace(e);else{f.removeClass("loading");b&&a(window).scrollTop(0);var g=a("<div />").append(c.responseText.match(/<body\b([^\u0000]+)<\/body>/)[0].replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
""));document.title=c.responseText.match(/<title>(.+)<\/title>/)[1];a("#content").html(g.find("#content").children()).removeClass("loading");g.find("#nav").is(".empty")||a("#nav").html(g.find("#nav").children());window._gaq&&_gaq.push(["_trackPageview"]);l._loadPage()}}})},_xhr:void 0,_loadPage:function(){a(window).trigger("pageload");h()?(window._gaq&&_gaq.push(["_trackEvent","Mobile 2012",window.location.href]),a(window).bind("resize.defer",function(){h()||(a(this).unbind("resize.defer"),l._resumeLoad(),
l._fullLoad())}),this._deferLoad()):this._fullLoad()},_deferLoad:function(){a(window).trigger("deferpageload")},_resumeLoad:function(){a(window).trigger("resumepageload")},_fullLoad:function(){a(window).trigger("fullpageload")}};a("#nav.empty").length&&a.getJSON("http://coscup.org/2012/api/menu/?callback=?",function(e){a("#nav").removeClass("empty").html(e[j].replace(/href="(\/[^\/])/g,'href="http://coscup.org$1'));a('#nav a[href*="'+window.location.hostname+'"]').parent().addClass("current")});a("#sidebar > .sponsors.empty").length&&
a.getJSON("http://coscup.org/2012/api/sponsors/?callback=?",function(e){var d=a("#sidebar > .sponsors").removeClass("empty"),b={en:{diamond:"Diamond Level Sponsors",gold:"Gold Level Sponsors",silver:"Silver Level Sponsors",bronze:"Bronze Level Sponsors",media:"Media Partners"},"zh-tw":{diamond:"\u947d\u77f3\u7d1a\u8d0a\u52a9",gold:"\u9ec3\u91d1\u7d1a\u8d0a\u52a9",silver:"\u767d\u9280\u7d1a\u8d0a\u52a9",bronze:"\u9752\u9285\u7d1a\u8d0a\u52a9",media:"\u5a92\u9ad4\u5925\u4f34"},"zh-cn":{diamond:"\u94bb\u77f3\u7ea7\u8d5e\u52a9",
gold:"\u9ec4\u91d1\u7ea7\u8d5e\u52a9",silver:"\u767d\u94f6\u7ea7\u8d5e\u52a9",bronze:"\u9752\u94dc\u7ea7\u8d5e\u52a9",media:"\u5a92\u4f53\u4f19\u4f34"}}[j];a.each(["diamond","gold","silver","bronze","media"],function(f,c){if(e[c]){d.append("<h2>"+b[c]+"</h2>");var h=a('<ul class="'+c+'" />');a.each(e[c],function(a,c){h.append('<li><a href="'+c.url+'" target="_blank"><img title="'+c.name[j]+'" src="'+c.logoUrl+'" /></a></li>')});d.append(h)}});k()});a(".sponsors a, #mobileSponsorLogo a").live("click",
function(){window._gaq&&_gaq.push(["_trackEvent","Sponsors 2012",this.href]);return!0});a("#mobileSponsorLogo a").live("click",function(){window._gaq&&_gaq.push(["_trackEvent","Sponsors 2012 (Mobile only)",this.href]);return!0});a("#nav > ul > li").bind("touchstart",function(){var e=a(this);e.addClass("selected");a(document.body).bind("touchend",function(d){e.removeClass("selected");a(this).unbind(d)})});a(window).bind("pageload",k);a(window).bind("pageload",function(){if(a(".shortcuts").length&&
!((new Date).getTime()>parseInt(a(".program tbody th:last").attr("rel")+"000",10))){var e=a('<a href="#" />').text({"zh-tw":"\u76ee\u524d\u8b70\u7a0b","zh-cn":"\u76ee\u524d\u8bae\u7a0b",en:"Current Session"}[j]);e.bind("click",function(b){var c=(new Date).getTime(),d;b.stopPropagation();b.preventDefault();a(".program tbody th").each(function(b,e){var f=parseInt(a(e).attr("rel")+"000",10);if(c<f&&d)return a(document.body).animate({scrollTop:a(d).offset().top-20},180),a(window).trigger("scroll"),!1;
c>f&&(d=e)});d||(a(document.body).animate({scrollTop:a(".program tbody th:first").offset().top-20},180),a(window).trigger("scroll"))});a(".shortcuts").append(a('<li class="fullwidth" />').append(e));a(".shortcuts").after('<a class="mobile_top" href="#"></a>');var d=a(".mobile_top"),b;d.bind("click",function(){a(window).trigger("scroll");a(document.body).animate({scrollTop:a(".shortcuts").offset().top-20},180);return!1});a(window).bind("resize.mt scroll.mt",function(){d.removeClass("show");clearTimeout(b);
b=setTimeout(function(){a(".shortcuts").offset().top<a(document.body).scrollTop()&&d.css("top",a(document.body).scrollTop()+(window.innerHeight||a(window).height())-d.height()-15).addClass("show")},200)});a(window).one("pageunload",function(){clearTimeout(b);a(window).unbind("resize.mt scroll.mt")})}});a(window).bind("pageload",function(){a("#header").css("background-position","center -"+(75*Math.floor(4*Math.random())).toString(10)+"px");a("#footer").css("background-position","center -"+(75*Math.floor(6*
Math.random())).toString(10)+"px")});a(window).bind("fullpageload",function(){if(a("#sidebar2 > .images").length){var e=function(){a("#sidebar2 > .images").imageTile({num:12,photos:yuren_54,beforeImageLoad:function(a){a.css("opacity",0)},imageLoad:function(a){a.css("opacity",1)}})};a.fn.imageTile?e():a.ajax({url:"http://coscup.org/2012-theme/assets/imagetile.min.js",dataType:"script",cache:!0,success:e})}});a(window).bind("fullpageload",function(){if(a("#sidebar2 > .socialbuzz").length){a(".socialbuzz").delegate("a",
"click",function(){window.open(this.href);return!1});a(window).one("pageunload",function(){a(".socialbuzz").undelegate("a","click")});var e,d,b=function(b,c){var d=a("<ul />"),e=[];if(c)for(var h=0,i;2>h;){i=c.results.shift();if(!i)break;!/plurk\.com/.test(i.source)&&!/^RT/.test(i.text)&&-1===a.inArray(i.from_user,e)&&(e.push(i.from_user),d.append(a("<li />").append(a('<span class="text" />').html(i.text)).append('<span class="meta"><a href="https://twitter.com/#!/'+i.from_user+"/status/"+i.id_str+
'">@'+i.from_user+"</a></span>")),h++)}if(b)for(h=0;2>h;){i=b.plurks.shift();if(!i)break;b.users[i.user_id]&&!/plurk\.com\/(m\/)?\p\//.test(i.content)&&-1===a.inArray(b.users[i.user_id].nick_name,e)&&(e.push(b.users[i.user_id].nick_name),d.append(a("<li />").append(a('<span class="text" />').html(i.content)).append('<span class="meta"><a href="http://www.plurk.com/p/'+i.plurk_id.toString(36)+'">@'+b.users[i.user_id].nick_name+"</a></span>")),h++)}a("#sidebar2 > .socialbuzz").empty().append(d)};a.getJSON(window.location.href.match(/^http:\/\/coscup.org\/[^\/]+\//)[0]+
"api/plurk/",function(a){e=a;b(e,d)});a.getJSON("https://search.twitter.com/search.json?q=coscup+OR+from%3Acoscup&callback=?",function(a){d=a;b(e,d)})}});a(window).bind("fullpageload",function(){a("#ipv6block").length&&("ipv6.coscup.org"===window.location.hostname?(window._gaq&&_gaq.push(["_trackEvent","IPv6 2012","connected"]),a("#ipv6block").addClass("show").append("<h2>IPv6 Connectivity</h2><p>You are currently using IPv6 connection.</p>")):a.getJSON("http://v6.ipv6-test.com/api/myip.php?json&callback=?",
function(){window._gaq&&_gaq.push(["_trackEvent","IPv6 2012","ready but not connected"]);a("#ipv6block").addClass("show").append('<h2>Connect using IPv6</h2><p>Your network is IPv6 ready. Try it now by connect to <a href="http://ipv6.coscup.org/">ipv6.coscup.org</a>.</p>')}))});a(window).bind("fullpageload",function(){clearTimeout(d);if(a("#countdown-time").length){var e=function(){var b=Math.floor((new Date("Fri Jul 16 2012 20:00:00 GMT+0800 (CST)")-new Date)/1E3);0>b&&(clearTimeout(d),a("#countdown").html({en:'<a href="http://registrano.com/events/coscup2012-regist?locale=en">Register Now!</a>',
"zh-tw":'<a href="http://registrano.com/events/coscup2012-regist">\u7acb\u523b\u5831\u540d\uff01</a>',"zh-cn":'<a href="http://registrano.com/events/coscup2012-regist">\u7acb\u523b\u62a5\u540d\uff01</a>'}[j]));s=[];s[0]=(b%60).toString(10)+{en:" seconds","zh-cn":" \u79d2","zh-tw":" \u79d2"}[j];b=Math.floor(b/60);s[1]=(b%60).toString(10)+{en:" minutes ","zh-cn":" \u5206 ","zh-tw":" \u5206 "}[j];b=Math.floor(b/60);s[2]=(b%24).toString(10)+{en:" hours ","zh-cn":" \u65f6 ","zh-tw":" \u6642 "}[j];(b=Math.floor(b/
24))&&(s[3]=b.toString(10)+{en:" days ","zh-cn":" \u5929 ","zh-tw":" \u5929 "}[j]);a("#countdown-time").text(s.reverse().join(""))},d=setInterval(e,1E3);e();a("#countdown").addClass("show");a(window).one("pageunload",function(){clearTimeout(d)})}});a(window).bind("deferpageload",function(){a(".hideInMobile iframe").each(function(){a(this).attr("data-src",this.src);this.src=""});a(window).bind("resumepageload",function(){a(".hideInMobile iframe").each(function(){a(this).attr("data-src")&&(this.src=
a(this).attr("data-src"))})})});var n;a(window).bind("pageload",m);window.applicationCache&&0!==window.applicationCache.status&&a.ajax({url:"",success:function(e,d,b){var e={en:["Ver: ","Check for update now"],"zh-tw":["\u7248\u672c\uff1a","\u7acb\u523b\u6aa2\u67e5\u66f4\u65b0"],"zh-cn":["\u7248\u672c\uff1a","\u7acb\u523b\u68c0\u67e5\u66f4\u65b0"]},d=new Date(b.getResponseHeader("Last-Modified")),f=function(a){return(10>a?"0":"")+a},b=a("#copyright"),e=a('<a href="#" title="'+e[j][1]+'">'+e[j][0]+
"v"+d.getUTCFullYear()+f(d.getUTCMonth()+1)+f(d.getUTCDate())+"."+f(d.getUTCHours())+f(d.getUTCMinutes())+"</a>");e.bind("click",function(b){b.preventDefault();b.stopPropagation();a(document.body).addClass("appcache-allinfo");a("#appcache_info")[0].className="appcache-checking";setTimeout(function(){window.applicationCache.update()},500);return!1});b.append('<span class="separator"> | </span>');b.append(e)}});l.init()});

