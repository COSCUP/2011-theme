jQuery(function(a){function k(){return!a("#title:visible").length}function p(){var b=[];a("#mobileSponsorLogo").remove();a.each({diamond:10,gold:5,silver:2,bronze:1},function(c,e){a("#sidebar > .sponsors ."+c+" a").each(function(){for(var a=e;a--;)b.push(this)})});b.length!==0&&a("#nav").after(a('<p id="mobileSponsorLogo" />').append(a(b[Math.floor(b.length*Math.random())]).clone()))}function A(){if(a(".shortcuts")&&!((new Date).getTime()>parseInt(a(".program tbody th:last").attr("rel")+"000",10))){var b=
a('<a href="#" />').text({"zh-tw":"\u76ee\u524d\u8b70\u7a0b","zh-cn":"\u76ee\u524d\u8bae\u7a0b",en:"Current Session"}[g]);b.bind("click",function(b){var e=(new Date).getTime(),f;b.stopPropagation();b.preventDefault();a(".program tbody th").each(function(b,d){var c=parseInt(a(d).attr("rel")+"000",10);if(e>c&&f)return f.scrollIntoView(!0),!1;e>c&&(f=d)});f||a(".program tbody th:first")[0].scrollIntoView(!0)});a(".shortcuts").append(a('<li class="fullwidth" />').append(b))}}function q(){a("#sidebar2 > .images").imageTile({num:12,
photos:yuren_54,beforeImageLoad:function(a){a.css("opacity",0)},imageLoad:function(a){a.css("opacity",1)}})}function r(b,c){var e=a("<ul />"),f=[];if(c)for(var h=0,d;h<2;){d=c.results.shift();if(!d)break;!/plurk\.com/.test(d.source)&&!/^RT/.test(d.text)&&a.inArray(d.from_user,f)===-1&&(f.push(d.from_user),e.append(a("<li />").append(a('<span class="text" />').html(d.text)).append('<span class="meta"><a href="https://twitter.com/#!/'+d.from_user+"/status/"+d.id_str+'">@'+d.from_user+"</a></span>")),
h++)}if(b)for(h=0;h<2;){d=b.plurks.shift();if(!d)break;b.users[d.user_id]&&!/plurk\.com\/(m\/)?\p\//.test(d.content)&&a.inArray(b.users[d.user_id].nick_name,f)===-1&&(f.push(b.users[d.user_id].nick_name),e.append(a("<li />").append(a('<span class="text" />').html(d.content)).append('<span class="meta"><a href="http://www.plurk.com/p/'+d.plurk_id.toString(36)+'">@'+b.users[d.user_id].nick_name+"</a></span>")),h++)}a("#sidebar2 > .socialbuzz").empty().append(e)}function t(){a("#sidebar2 > .images").length&&
(a.fn.imageTile?q():a.ajax({url:"http://coscup.org/2011-theme/assets/imagetile.min.js",dataType:"script",cache:!0,success:q}));if(a("#sidebar2 > .socialbuzz").length){var b,c;a.getJSON("http://coscup.org/2011/api/plurk/",function(a){b=a;r(b,c)});a.getJSON("https://search.twitter.com/search.json?q=coscup+OR+from%3Acoscup&callback=?",function(a){c=a;r(b,c)})}a("#ipv6block").length&&(window.location.hostname==="ipv6.coscup.org"?(window._gaq&&_gaq.push(["_trackEvent","IPv6 2011","connected"]),a("#ipv6block").addClass("show").append("<h2>IPv6 Connectivity</h2><p>You are currently using IPv6 connection.</p>")):
a.getJSON("http://v6.ipv6-test.com/api/myip.php?json&callback=?",function(){window._gaq&&_gaq.push(["_trackEvent","IPv6 2011","ready but not connected"]);a("#ipv6block").addClass("show").append('<h2>Connect using IPv6</h2><p>Your network is IPv6 ready. Try it now by connect to <a href="http://ipv6.coscup.org/">ipv6.coscup.org</a>.</p>')}));a("#countdown-time").length&&(l=setInterval(u,1E3),u(),a("#countdown").addClass("show"))}function B(){a(".hideInMobile iframe").each(function(){a(this).attr("data-src",
this.src);this.src=""})}function C(){a("#sidebar2 iframe").each(function(){if(a(this).attr("data-src"))this.src=a(this).attr("data-src")})}function v(){p();w();A();clearTimeout(l);a("#header").css("background-position","center -"+(75*Math.floor(Math.random()*4)).toString(10)+"px");a("#footer").css("background-position","center -"+(75*Math.floor(Math.random()*6)).toString(10)+"px");k()?(window._gaq&&_gaq.push(["_trackEvent","Mobile 2011",window.location.href]),a(window).bind("resize.defer",function(){k()||
(a(this).unbind("resize.defer"),t(),C())}),B()):(t(),window.history&&history.pushState&&a("a").each(function(){this.hostname!==window.location.hostname||!/2011/.test(this.pathname)||!RegExp(g).test(this.pathname.toLowerCase())||this.href===window.location.href||i[this.href]||i[this.href]==="fetching"||/nocache/.test(this.getAttribute("rel"))||(j.push(this.href),i[this.href]="fetching",j.length===1&&x())}))}function y(b,c,e){a(window).unbind("resize.defer");m&&m.abort();if(!c&&i[b]&&i[b]!=="fetching")e&&
a(window).scrollTop(0),z(i[b]);else{var f=a("#content").addClass("loading");m=a.ajax({url:b,dataType:"html",cache:!c,complete:function(c,d){d==="success"||d==="notmodified"?(f.removeClass("loading"),i[b]=c.responseText,e&&a(window).scrollTop(0),z(c.responseText)):window.location.replace(b)}})}}function z(b){var c=a("<div />").append(b.match(/<body\b([^\u0000]+)<\/body>/)[0].replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""));document.title=b.match(/<title>(.+)<\/title>/)[1];a("#content").html(c.find("#content").children()).removeClass("loading");
c.find("#nav").is(".empty")||a("#nav").html(c.find("#nav").children());window._gaq&&_gaq.push(["_trackPageview"]);v()}function x(){var b=j.shift();a.ajax({url:b,dataType:"html",cache:!0,complete:function(a,e){if(e==="success"||e==="notmodified")i[b]=a.responseText;j.length!==0&&x()}})}function w(){if(n){var b=function(){var b={};a(".types li").each(function(f){b[(f+1).toString(10)]=a(this).text()});return b}();a.fn.translateTo=function(a){return a?(a+=10,this.addClass("translate").css({"-webkit-transform":"translateX("+
a.toString(10)+"px)","-moz-transform":"translateX("+a.toString(10)+"px)","-ms-transform":"translateX("+a.toString(10)+"px)",transform:"translateX("+a.toString(10)+"px)"})):this.removeClass("translate").css({"-webkit-transform":"","-moz-transform":"","-ms-transform":"",transform:""})};var c;a("table.program").each(function(){var b=a(this);b.prev().after(a('<div class="program" />').append(b).bind("scroll",function(){var b=a(this);b.find("thead th:first, tbody th").translateTo(0);clearTimeout(c);c=
setTimeout(function(){b.find("thead th:first, tbody th").translateTo(b.scrollLeft())},200)}).bind("touchstart",function(b){var e=a(this),d=a(window),c=b.clientX||b.originalEvent.touches[0].clientX,g=b.clientY||b.originalEvent.touches[0].clientY;e.hasClass("expend")&&!k()&&(e.addClass("movestart"),d.bind("touchmove",function(a){e.removeClass("movestart").addClass("moving").scrollLeft(e.scrollLeft()+c-(a.clientX||a.originalEvent.touches[0].clientX));a.type!=="touchmove"&&d.scrollTop(d.scrollTop()+g-
(a.clientY||a.originalEvent.touches[0].clientY));c=a.clientX||a.originalEvent.touches[0].clientX;g=a.clientY||a.originalEvent.touches[0].clientY}).bind("touchend",function(){d.unbind("touchmove touchend");setTimeout(function(){e.removeClass("moving movestart")},0);return!1}))}))});a("table.program td").each(function(){var e=a(this),f=n[e.data("pid")];if(f&&f.type!==0){var c=a('<ul class="meta" />'),d={en:"English",zh:"\u6f22\u8a9e"}[(this.className.match(/program_lang_(\w+)\b/)||[])[1]],g=b[(this.className.match(/program_type_(\w+)\b/)||
[])[1]];d&&c.append(a("<li />").text(d));g&&c.append(a("<li />").text(g));d=a('<div class="info" />');f["abstract"]&&d.append(a('<div class="abstract" />').html(f["abstract"]));f.bio&&d.append(a('<div class="bio" />').html(f.bio));c.children().length&&d.append(c);d.children().length&&e.append(d)}}).bind("click",function(){var b=a(this),c=b.parents("div.program"),g=parseInt((this.className.match(/program_room_(\w+)\b/)||[])[1]),d=a(window).scrollTop()-b.offset().top;if(c.hasClass("moving"))return!1;
window._gaq&&_gaq.push(["_trackEvent","Program 2011",this.hash]);a(this).toggleClass("expend");c.toggleClass("expend");c.find("thead th:first, tbody th").translateTo(c.scrollLeft());switch(g){case 0:c.scrollLeft(c[0].scrollWidth*0.26);break;case 1:c.scrollLeft(0);break;case 2:c.scrollLeft(c[0].scrollWidth*0.13);break;case 3:c.scrollLeft(c[0].scrollWidth*0.38);break;case 4:c.scrollLeft(c[0].scrollWidth)}a(window).scrollTop(b.offset().top+d)});a(".program p.name a").bind("click",function(a){if(a.which==
2||a.metaKey)return!0;a.preventDefault()});a(".program div a").bind("click",function(a){if(a.which==2||a.metaKey)return!0;window.open(this.href);a.preventDefault();a.stopPropagation()})}}function u(){var b=1310731200-Math.floor((new Date).getTime()/1E3);b<0&&(clearTimeout(l),a("#countdown").html({en:'<a href="http://registrano.com/events/coscup2011-regist?locale=en">Register Now!</a>',"zh-tw":'<a href="http://registrano.com/events/coscup2011-regist">\u7acb\u523b\u5831\u540d\uff01</a>',"zh-cn":'<a href="http://registrano.com/events/coscup2011-regist">\u7acb\u523b\u62a5\u540d\uff01</a>'}[g]));
s=[];s[0]=(b%60).toString(10)+{en:" seconds","zh-cn":" \u79d2","zh-tw":" \u79d2"}[g];b=Math.floor(b/60);s[1]=(b%60).toString(10)+{en:" minutes ","zh-cn":" \u5206 ","zh-tw":" \u5206 "}[g];b=Math.floor(b/60);s[2]=(b%24).toString(10)+{en:" hours ","zh-cn":" \u65f6 ","zh-tw":" \u6642 "}[g];(b=Math.floor(b/24))&&(s[3]=b.toString(10)+{en:" days ","zh-cn":" \u5929 ","zh-tw":" \u5929 "}[g]);a("#countdown-time").text(s.reverse().join(""))}var g=(a("html").attr("lang")||"zh-TW").toLowerCase(),l;a("#nav.empty").length&&
a.getJSON("http://coscup.org/2011/api/menu/?callback=?",function(b){a("#nav").removeClass("empty").html(b[g].replace(/href="(\/[^\/])/g,'href="http://coscup.org$1'));a('#nav a[href*="'+window.location.hostname+'"]').parent().addClass("current")});a("#sidebar > .sponsors.empty").length&&a.getJSON("http://coscup.org/2011/api/sponsors/?callback=?",function(b){var c=a("#sidebar > .sponsors").removeClass("empty"),e={en:{diamond:"Diamond Level Sponsors",gold:"Gold Level Sponsors",silver:"Silver Level Sponsors",
bronze:"Bronze Level Sponsors",media:"Media Partners"},"zh-tw":{diamond:"\u947d\u77f3\u7d1a\u8d0a\u52a9",gold:"\u9ec3\u91d1\u7d1a\u8d0a\u52a9",silver:"\u767d\u9280\u7d1a\u8d0a\u52a9",bronze:"\u9752\u9285\u7d1a\u8d0a\u52a9",media:"\u5a92\u9ad4\u5925\u4f34"},"zh-cn":{diamond:"\u94bb\u77f3\u7ea7\u8d5e\u52a9",gold:"\u9ec4\u91d1\u7ea7\u8d5e\u52a9",silver:"\u767d\u94f6\u7ea7\u8d5e\u52a9",bronze:"\u9752\u94dc\u7ea7\u8d5e\u52a9",media:"\u5a92\u4f53\u4f19\u4f34"}}[g];a.each(["diamond","gold","silver","bronze",
"media"],function(f,h){if(b[h]){c.append("<h2>"+e[h]+"</h2>");var d=a('<ul class="'+h+'" />');a.each(b[h],function(a,b){d.append('<li><a href="'+b.url+'" target="_blank"><img title="'+b.name[g]+'" src="'+b.logoUrl+'" /></a></li>')});c.append(d)}});p()});a(".sponsors a, #mobileSponsorLogo a").live("click",function(){window._gaq&&_gaq.push(["_trackEvent","Sponsors 2011",this.href]);return!0});a("#mobileSponsorLogo a").live("click",function(){window._gaq&&_gaq.push(["_trackEvent","Sponsors 2011 (Mobile only)",
this.href]);return!0});a(".shortcuts a").live("click",function(b){navigator.standalone&&(b.preventDefault(),a(this.hash)[0].scrollIntoView(!0))});a("#nav > ul > li").bind("touchstart",function(){var b=a(this);b.addClass("selected");a(document.body).bind("touchend",function(c){b.removeClass("selected");a(this).unbind(c)})});var m,i={},j=[];v();if(window.history&&history.pushState){var o="state"in window.history,D=location.href;a("a").live("click",function(b){if(b.which==2||b.metaKey)return!0;if(this.hostname!==
window.location.hostname||!/2011/.test(this.pathname)||!RegExp(g).test(this.pathname.toLowerCase())||this.getAttribute("href").substr(0,1)==="#"||/nocache/.test(this.getAttribute("rel")))return!0;a(this).parent("#nav li").addClass("loading");var b=this.href,c=this.href===window.location.href;history.pushState({is:"pushed"},"",b);y(b,c,!0);o=!0;return!1});window.onpopstate=function(){var a=!o&&location.href==D;o=!0;a||y(window.location.href,!1,!1)}}var n;/((blog|sponsor|register)\.)?coscup\.org\.?/.test(window.location.domain)||
a.getJSON("http://coscup.org/2011/api/program/?callback=?",function(a){n=a;w()})});

