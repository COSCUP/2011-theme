@charset "UTF-8";

@import "shared";

@media handheld, screen and (max-width: 480px) {
	// mobile layout

	body {
		//width: 100%;
		@include prefix(transition, 0);
		margin: 0 5px;
		padding: 0;
		font: $font_size sans-serif;
		line-height: $line_height;
		background: #f8f8f8;
	}
	
	#header, #footer {
		margin: 0 -5px; padding: 0;
		@include prefix(transition, 0);
	}
	
	#content {
		margin: 0; padding: 0;
		@include prefix(transition, 0);
		
		width: 100%;
		overflow: hidden;
		
		min-height: 40 * 2 + 60px;
		
		a {
			color: #000;
			text-decoration: underline;
			&:hover {
				color: #333;
			}
		}
		
		pre {
			width: 100%;
			overflow: auto;
			background-color: #f0f0f0;
		}
		
		.alignleft, .alignright, .aligncenter, .fullwidth {
			width: 100%;
		}
		
		&:before {
			content: '';
			background: rgba(#fff, 0.8) url('./loading.gif') center center no-repeat;
		}
		
		&.loading {
			> * {
				opacity: 0.3;
			}			
			position: relative;

			&:before {
				opacity: 1;
				position: absolute;
				top: 40px;
				left: 50%;
				z-index: 2;
				width: 60px; height: 60px;
				margin-left: -30px;
				@include prefix(border-radius, 5px);
			}
		}
		
		> #sidebar2 {
			background-color: $light;
			@include prefix(box-shadow, 0 0 5px #ccc);
			margin: $line_height 0;
			padding: $line_height ($line_height / 2);
			> h2 {
				font-size: 100%;
				margin: $line_height (-$line_height / 2);
				padding: 0 ($line_height / 2);
				//background-color: rgba(#000, 0.75);
				//color: #fff;
				border-bottom: 3px solid $dark;
			}
		}
	}
	
	#header, #footer {
		background: #ddd;
		border-top: 8px solid $dark;
		border-bottom: 8px solid $dark;
		background: #ddd url('./coscup-tile-bg-s.jpg') center center;
		@include prefix(box-shadow, 0 0 5px #333);
		> .info {
			background: rgba(255,255,255,0.85);
			margin: $gutter / 2 0;
		}
	}
	
	#header {
		> .info {
			background: rgba(255,255,255,0.85);
			margin: $gutter / 2 0;
			padding-top: $gutter / 2;
			padding-bottom: ($gutter / 2 + $line_height + 6);
			> h1 {
				margin: $gutter $gutter $gutter / 2 0; padding: 0;
				background: transparent url('coscup-140x48.png') center right no-repeat;
				float: left; width: 47%; height: 72px;
				overflow: visible;
				> a {
					display: block;
					width: 200%; height: 100%;
					position: relative;
					z-index: 4;
					text-indent: -10000%;
				}
			}
			> #date_place {
				margin: $gutter / 2; padding: 15px 0;
				color: $dark;
				background-color: #fff;
				font-size: bold;
				@include prefix(transition, 0);
				min-height: 72px - 15*2px + $gutter;
				font-size: 22px;
				line-height: 26px;
				> #date, > #place {
					display: block;
					margin-left: 47%;
					width: 50%;
					white-space: nowrap;
					overflow: hidden;
				}
			}
			> #nav, #language {
				clear: both;
				padding: 10px 20px;				
				ul {
					list-style: none;
					margin: 0; padding: 0;
					width: 100%;
				}
				li > a {
					display: block;
					padding: 6px 12px;
					border: 1px solid #ccc;
					margin-top: -1px;
					height: 24px;
					color: #000;
					text-decoration: none;
					font-size: 18px;
					line-height: 24px;
					white-space: nowrap;
					background-color: #eee;
				}
				li li > a {
					background-color: #fff;
					text-indent: 10px;
				}
				li.current > a {
					background-color: #333;
					border-color: #333;
					color: #fff;
				}
			}
			> #nav > ul {
				@include prefix(border-radius, 8px);
				> li {
					&:first-child {
						&,
						> a {
							-moz-border-radius-topleft: 8px;
							-moz-border-radius-topright: 8px;
							-webkit-border-top-left-radius: 8px;
							-webkit-border-top-right-radius: 8px;
							border-top-left-radius: 8px;
							border-top-right-radius: 8px;
						}
					}
					&:last-child {
						&,
						//> a:last-child, // only matches link w/o sub-menu
						> a, // match link with or w/o sub-menu (for now)
						> ul > li:last-child, // match last item of the sub-menu
						> ul > li:last-child > a { // ... and its link
							-moz-border-radius-bottomleft: 8px;
							-moz-border-radius-bottomright: 8px;
							-webkit-border-bottom-left-radius: 8px;
							-webkit-border-bottom-right-radius: 8px;
							border-bottom-left-radius: 8px;
							border-bottom-right-radius: 8px;
						}
						&.current > a, &.current-ancestor > a { // when there is a sub-menu
							@include prefix(border-radius, 0);
						}
						&.current > a:last-child, &.current-ancestor > a:last-child { // when there actually isnt
							-moz-border-radius-bottomleft: 8px;
							-moz-border-radius-bottomright: 8px;
							-webkit-border-bottom-left-radius: 8px;
							-webkit-border-bottom-right-radius: 8px;
							border-bottom-left-radius: 8px;
							border-bottom-right-radius: 8px;
						}
					}
					> ul {
						display: none;
					}
					&.current > ul, &.current-ancestor > ul {
						display: block;
					}
				}
			}
			
			> #mobileSponsorLogo {
				margin: 0 $gutter / 2; padding: $gutter / 2 0;
				background-color: #fff;
				text-align: center;
				height: 72px;
				> a {
					display: block;
					width: 100%;
					height: 100%;
					> img {
						width: 178px;
						height: 72px;
					}
				}
			}

			> #language {
				width: (60 + 12 + 8) * 3px;
				margin: 0 auto;
				li > a {
					width: 72px;
					padding: 6px 0;
					font-size: $font_size;
					line-height: $line_height;
					height: $line_height;
					float: left;
					text-align: center;
					background-color: $light;
					@include prefix(border-radius, 8px);
					border: none;
					margin: 0 4px;
				}
			}
		}
	}
	
	#footer {
		> .info > p {
			margin: 0;
			padding: $gutter / 2;
		}
		#archives {
			text-align: right;
			a {
				color: #333;
				text-decoration: none;
				&:hover {
					color: #000;
					text-decoration: underline;
				}
			}
		}
	}
	
	#message, #mascot_icon, #connect_box, #sidebar, .hideInMobile, #title, #title_en, #tagline {
		display: none;
	}
}
